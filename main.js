(()=>{"use strict";var e=document.querySelector(".form_type_photo"),t=document.querySelector(".form_type_profile"),n=t.querySelector(".form__item_type_name"),r=t.querySelector(".form__item_type_job"),o=document.querySelector(".profile__edit"),i=document.querySelector(".profile__add"),a=document.querySelector(".form_type_avatar"),u=document.querySelector(".profile__photo-add"),c={formSelector:".form",inputSelector:".form__item",submitButtonSelector:".form__keep",inactiveButtonClass:"form__keep_inactive",inputErrorClass:"form__item_type_error",errorClass:"form__item-error_active"};function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t,n,r,o,i){var a=i.handleDeleteClick,u=i.handleLikeClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._likes=t.likes,this._userId=r,this._id=t._id,this._ownerId=t.owner._id,this._selector=n,this._handleCardClick=o,this._handleDeleteClick=a,this._handleLikeClick=u}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._selector).content.querySelector(".photo__card").cloneNode(!0)}},{key:"_getView",value:function(){this._ownerId===this._userId&&this._buttonDelete.classList.add("photo__delete_show")}},{key:"generateCard",value:function(){var e=this;this._element=this._getTemplate();var t=this._element.querySelector(".photo__image");return this._buttonLike=this._element.querySelector(".photo__like"),this._likeCount=this._element.querySelector(".photo__like-counter"),this._buttonDelete=this._element.querySelector(".photo__delete"),this._setEventListeners(),t.src=this._link,t.alt=this._name,this._element.querySelector(".photo__title").textContent=this._name,this._likeCount.textContent=this._likes.length,this._likes.some((function(t){return e._userId===t._id}))&&this._buttonLike.classList.add("photo__like_active"),this._getView(),this._element}},{key:"isLike",value:function(){return this._isLike}},{key:"addLike",value:function(e){var t=this;this._isLike=e.likes.filter((function(e){return e._id===t._userId})).length>0,this._likeCount.textContent=e.likes.length,this._isLike?this._buttonLike.classList.add("photo__like_active"):this._buttonLike.classList.remove("photo__like_active")}},{key:"_handleImageClick",value:function(){this._handleCardClick(this._name,this._link)}},{key:"removeCard",value:function(){this._element.remove(),this._element=null}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".photo__image").addEventListener("click",(function(){e._handleImageClick()})),this._buttonDelete.addEventListener("click",(function(){e._handleDeleteClick()})),this._buttonLike.addEventListener("click",(function(t){e._handleLikeClick(e,t.target.classList.contains("photo__like_active"))}))}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const p=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"rendered",value:function(e){var t=this;e.reverse().forEach((function(e){return t._renderer(e)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&f(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const y=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=t,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._data.inputSelector)),this._buttonElement=this._formElement.querySelector(this._data.submitButtonSelector)}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._data.inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._data.errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._data.inputErrorClass),t.classList.remove(this._data.errorClass),t.textContent=""}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput(this._inputList)?(this._buttonElement.classList.add(this._data.inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)):(this._buttonElement.classList.remove(this._data.inactiveButtonClass),this._buttonElement.removeAttribute("disabled",!0))}},{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"enableValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}}])&&h(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._handleEscKey=this._handleEscKey.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscKey)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscKey)}},{key:"_handleEscKey",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){(t.target.classList.contains("popup")||t.target.classList.contains("popup__close"))&&e.close()}))}}])&&_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=k(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},b.apply(this,arguments)}function k(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function w(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(r);if(o){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return w(this,e)});function a(e){var t,n=e.selector,r=e.handleSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._form=t._popup.querySelector(".form"),t._inputList=t._form.querySelectorAll(".form__item"),t._submitButton=t._popup.querySelector(".form__keep"),t._handleSubmit=r,t}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;b(E(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleSubmit(e._getInputValues())}))}},{key:"close",value:function(){b(E(a.prototype),"close",this).call(this),this._form.reset()}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(d);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=C(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},j.apply(this,arguments)}function C(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}function I(e,t){if(t&&("object"===O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}var q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=R(r);if(o){var n=R(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return I(this,e)});function a(e){var t,n=e.ImagePopup,r=e.imageName,o=e.imageLink;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._imageName=document.querySelector(r),t._imageLink=document.querySelector(o),t}return t=a,(n=[{key:"open",value:function(e,t){j(R(a.prototype),"open",this).call(this),this._imageName.textContent=e,this._imageLink.src=t,this._imageLink.alt=e}}])&&L(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(d);function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(){return x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=A(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},x.apply(this,arguments)}function A(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=U(e)););return e}function V(e,t){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},V(e,t)}function B(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function U(e){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},U(e)}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=U(r);if(o){var n=U(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return B(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._form=n._popup.querySelector(".form"),n}return t=a,(n=[{key:"setFormSubmitHandler",value:function(e){this._handleSubmit=e}},{key:"setEventListeners",value:function(){var e=this;x(U(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleSubmit()}))}}])&&T(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(d);function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const H=function(){function e(t){var n=t.name,r=t.about,o=t.avatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._about=document.querySelector(r),this._avatar=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,about:this._about.textContent}}},{key:"setUserInfo",value:function(e){this._name.textContent=e.name,this._about.textContent=e.about}},{key:"setUserAvatar",value:function(e){this._avatar.src=e.avatar||e.link}}])&&K(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var G=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=t.url,this._headers=t.headers}var t,n;return t=e,(n=[{key:"getInitialCard",value:function(){var e=this;return fetch("".concat(this._url,"/cards"),{method:"GET",headers:this._headers}).then((function(t){return e.getResponseData(t)}))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this._url,"/users/me"),{method:"GET",headers:this._headers}).then((function(t){return e.getResponseData(t)}))}},{key:"setUserInfo",value:function(e){var t=this;return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return t.getResponseData(e)}))}},{key:"setAvatar",value:function(e){var t=this;return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then((function(e){return t.getResponseData(e)}))}},{key:"postNewCard",value:function(e){var t=this;return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return t.getResponseData(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t.getResponseData(e)}))}},{key:"addLike",value:function(e){var t=this;return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then((function(e){return t.getResponseData(e)}))}},{key:"deleteLike",value:function(e){var t=this;return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then((function(e){return t.getResponseData(e)}))}},{key:"getResponseData",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}}])&&J(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}())({url:"https://mesto.nomoreparties.co/v1/cohort-41",headers:{authorization:"cc692a39-3e91-4f31-81a0-56c5cbc20e10","Content-type":"application/json"}});function M(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.querySelector(".".concat(e," .form__keep"));n.textContent=t?"Сохранение...":"Сохранить"}Promise.all([G.getUserInfo(),G.getInitialCard()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];te.setUserInfo(o),te.setUserAvatar(o),z=o._id,ee.rendered(i)})).catch((function(e){console.log(e)}));var z,$=new y(c,t),Q=new y(c,e),W=new y(c,a);function X(e,t){ne.open(e,t)}$.enableValidation(),Q.enableValidation(),W.enableValidation();var Y=new N(".popup_type_delete-photo");function Z(e,t,n){var r=new l(e,".photo-template",t,X,{handleDeleteClick:function(){return function(e){Y.setFormSubmitHandler((function(){G.deleteCard(e._id).then((function(){e.removeCard(),Y.close()})).catch((function(e){console.log("".concat(e))}))})),Y.open()}(r)},handleLikeClick:function(){return function(e,t){(e.isLike()?G.deleteLike(e._id):G.addLike(e._id)).then((function(t){e.addLike(t)})).catch((function(e){console.log("".concat(e))}))}(r)}}),o=r.generateCard();n.addItem(o)}Y.setEventListeners();var ee=new p({renderer:function(e){Z(e,z,ee)}},".photo"),te=new H({name:".profile__name",about:".profile__job",avatar:".profile__image"}),ne=new q({ImagePopup:".popup_type_open-photo",imageName:".popup__photo-caption",imageLink:".popup__big-photo"});ne.setEventListeners();var re=new H({name:".profile__name",about:".profile__job"}),oe=new S({selector:".popup_type_photo",handleSubmit:function(e){M("popup_type_photo",!0),G.postNewCard(e).then((function(e){Z(e,z,ee),oe.close()})).catch((function(e){console.log(e)})).finally((function(){M("popup_type_photo",!1)}))}});oe.setEventListeners(),i.addEventListener("click",(function(){Q.resetValidation(),oe.open()}));var ie=new S({selector:".popup_type_avatar",handleSubmit:function(e){M("popup_type_avatar",!0),G.setAvatar(e).then((function(e){te.setUserAvatar(e),ie.close()})).catch((function(e){console.log("".concat(e))})).finally((function(){M("popup_type_avatar",!1)}))}});ie.setEventListeners(),u.addEventListener("click",(function(){W.resetValidation(),ie.open()}));var ae=new S({selector:".popup_type_profile",handleSubmit:function(e){M("popup_type_profile",!0),G.setUserInfo(e).then((function(e){re.setUserInfo(e),ae.close()})).catch((function(e){console.log("".concat(e))})).finally((function(){M("popup_type_profile",!1)}))}});ae.setEventListeners(),o.addEventListener("click",(function(){var e=re.getUserInfo();n.value=e.name,r.value=e.about,ae.open(),$.resetValidation()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNOQyxRQUFRQyxJQUFSLFVBQWVGLE9BRWhCeUIsU0FBUSxXQUNQeEMsRUFBYyxzQkFBdUIsU0FNNUM0QyxHQUFpQlIsb0JBRWpCbEwsRUFBV3NELGlCQUFrQixTQUFTLFdBQ3JDLElBQU0rRixFQUFXOEIsR0FBS2hDLGNBQ3RCckosRUFBVTBHLE1BQVE2QyxFQUFTakksS0FDM0JyQixFQUFTeUcsTUFBUTZDLEVBQVNoQyxNQUMxQnFFLEdBQWlCdEIsT0FDakJKLEVBQW9CdUIsc0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGlrdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWt1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGlrdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWt1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWt1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRGVsZXRlLmpzIiwid2VicGFjazovL3ByYWN0aWt1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWt1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGlrdW0vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHBob3RvRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX3R5cGVfcGhvdG8nKTsgLy/RhNC+0YDQvNCwINC00L7QsdCw0LLQu9C10L3QuNGPLdGB0L7RhdGA0LDQvdC10L3QuNGPINGE0L7RgtC+XG5leHBvcnQgY29uc3QgcHJvZmlsZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV90eXBlX3Byb2ZpbGUnKTsgLy/RhNC+0YDQvNCwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8t0YHQvtGF0YDQsNC90LXQvdC40Y8gINC/0YDQvtGE0LjQu9GPXG5leHBvcnQgY29uc3QgbmFtZUlucHV0ID0gcHJvZmlsZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fX2l0ZW1fdHlwZV9uYW1lJyk7IC8v0L/QvtC70LUg0LLQstC+0LTQsCDQuNC80LXQvdC4ICEhXG5leHBvcnQgY29uc3Qgam9iSW5wdXQgPSBwcm9maWxlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9faXRlbV90eXBlX2pvYicpOyAvL9C/0L7Qu9C1INCy0LLQvtC0INGA0LDQsdC+0YLRiyAhIVxuZXhwb3J0IGNvbnN0IGJ1dHRvbkVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdCcpOyAvL9C60L3QvtC/0LrQsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPLdC+0YLQutGA0YvRgtGMINC/0L7Qv9Cw0L8g0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRj1xuZXhwb3J0IGNvbnN0IGJ1dHRvbkFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQnKTsgLy/QutC90L7Qv9C60LAg0LTQvtCx0LDQstC70LXQvdC40Y8g0YTQvtGC0L4t0L7RgtC60YDRi9GC0Ywg0L/QvtC/0LDQvyDQtNC+0LHQsNCy0LvQtdC90LjRjyDRhNC+0YLQvlxuZXhwb3J0IGNvbnN0IGVkaXRBdmF0YXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fdHlwZV9hdmF0YXInKTtcbmV4cG9ydCBjb25zdCBidXR0b25BdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fcGhvdG8tYWRkJyk7XG5cblxuZXhwb3J0IGNvbnN0IGNvbmZpZ1ZhbGlkYXRpb24gPSB7XG4gIGZvcm1TZWxlY3RvcjogJy5mb3JtJyxcbiAgaW5wdXRTZWxlY3RvcjogJy5mb3JtX19pdGVtJyxcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcuZm9ybV9fa2VlcCcsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdmb3JtX19rZWVwX2luYWN0aXZlJyxcbiAgaW5wdXRFcnJvckNsYXNzOiAnZm9ybV9faXRlbV90eXBlX2Vycm9yJyxcbiAgZXJyb3JDbGFzczogJ2Zvcm1fX2l0ZW0tZXJyb3JfYWN0aXZlJyxcbiB9O1xuXG5cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCAgc2VsZWN0b3IsIHVzZXJJZCwgaGFuZGxlQ2FyZENsaWNrLCB7aGFuZGxlRGVsZXRlQ2xpY2ssIGhhbmRsZUxpa2VDbGlja30pIHtcblxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XG4gICAgdGhpcy5fb3duZXJJZCA9IGRhdGEub3duZXIuX2lkO1xuICAgIHRoaXMuX3NlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xuICB9XG5cbiAgLy/Qv9C+0LvRg9GH0LDQtdC8INGI0LDQsdC70L7QvSDQutCw0YDRgtC+0YfQutC4XG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3IpXG4gICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcignLnBob3RvX19jYXJkJylcbiAgICAuY2xvbmVOb2RlKHRydWUpO1xuXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICB9XG5cbiAgX2dldFZpZXcoKSB7XG4gICAgaWYgKHRoaXMuX293bmVySWQgPT09ICB0aGlzLl91c2VySWQpIHtcblxuICAgICAgdGhpcy5fYnV0dG9uRGVsZXRlLmNsYXNzTGlzdC5hZGQoJ3Bob3RvX19kZWxldGVfc2hvdycpO1xuICAgIH1cbiAgfVxuICAvL9Cz0L7RgtC+0LLQsNGPINC60LDRgNGC0L7Rh9C60LBcbmdlbmVyYXRlQ2FyZCgpIHtcbiAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gIGNvbnN0IGltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGhvdG9fX2ltYWdlJyk7XG5cblxuXG4gIHRoaXMuX2J1dHRvbkxpa2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5waG90b19fbGlrZScpO1xuICB0aGlzLl9saWtlQ291bnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5waG90b19fbGlrZS1jb3VudGVyJyk7XG4gIHRoaXMuX2J1dHRvbkRlbGV0ZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLnBob3RvX19kZWxldGUnKTtcblxuICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gIGltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gIGltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG4gIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLnBob3RvX190aXRsZScpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcblxuICB0aGlzLl9saWtlQ291bnQudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XG5cblxuXG4gIGlmICh0aGlzLl9saWtlcy5zb21lKChpdGVtKSA9PiB0aGlzLl91c2VySWQgPT09IGl0ZW0uX2lkKSkge1xuICAgIHRoaXMuX2J1dHRvbkxpa2UuY2xhc3NMaXN0LmFkZCgncGhvdG9fX2xpa2VfYWN0aXZlJyk7XG4gIH1cblxuICB0aGlzLl9nZXRWaWV3KCk7XG5cbiAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG59XG5cblxuXG5pc0xpa2UoKSB7XG4gIHJldHVybiB0aGlzLl9pc0xpa2U7XG59XG5cbmFkZExpa2UoZGF0YSkgIHtcbiAgdGhpcy5faXNMaWtlID0gZGF0YS5saWtlcy5maWx0ZXIoKGl0ZW0pID0+IHtyZXR1cm4gaXRlbS5faWQgPT09IHRoaXMuX3VzZXJJZDt9KS5sZW5ndGggPiAwO1xuICB0aGlzLl9saWtlQ291bnQudGV4dENvbnRlbnQgPSBkYXRhLmxpa2VzLmxlbmd0aDtcbiAgaWYodGhpcy5faXNMaWtlKSB7XG4gICAgdGhpcy5fYnV0dG9uTGlrZS5jbGFzc0xpc3QuYWRkKCdwaG90b19fbGlrZV9hY3RpdmUnKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLl9idXR0b25MaWtlLmNsYXNzTGlzdC5yZW1vdmUoJ3Bob3RvX19saWtlX2FjdGl2ZScpO1xuICB9XG59XG5cblxuLy/QvdCw0LbQuNC80LDQtdGCINC90LAg0LrQsNGA0YLQvtGH0LrRg1xuX2hhbmRsZUltYWdlQ2xpY2soKSB7XG4gIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcbn1cblxucmVtb3ZlQ2FyZCgpIHtcbiAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG59XG5cbi8v0YHQu9GD0YjQsNGC0LXQu9C4XG5fc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG5cbiAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGhvdG9fX2ltYWdlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snICwgKCkgPT4ge1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soKTtcbiAgfSk7XG5cbiAgdGhpcy5fYnV0dG9uRGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyAsICgpID0+IHtcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljaygpO1xuICB9KTtcblxuICB0aGlzLl9idXR0b25MaWtlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyAsIChldnQpID0+IHtcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sodGhpcyxcbiAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwaG90b19fbGlrZV9hY3RpdmUnKSk7XG4gIH0pO1xufVxuXG59XG4iLCJjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IgKHtyZW5kZXJlcn0sIHNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcblxuICB9XG4gIFxuXG4gIHJlbmRlcmVkKGl0ZW1zKSB7XG4gICAgaXRlbXMucmV2ZXJzZSgpLmZvckVhY2goaXRlbSA9PiB0aGlzLl9yZW5kZXJlcihpdGVtKSk7XG59XG5cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTZWN0aW9uO1xuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGRhdGEsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5fZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fZGF0YS5pbnB1dFNlbGVjdG9yKSk7XG5cbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9kYXRhLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvciAoaW5wdXRFbGVtZW50KSB7XG4gIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcblxuICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9kYXRhLmlucHV0RXJyb3JDbGFzcyk7XG4gIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZGF0YS5lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvciAoaW5wdXRFbGVtZW50KSB7XG4gIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcblxuICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9kYXRhLmlucHV0RXJyb3JDbGFzcyk7XG4gIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2RhdGEuZXJyb3JDbGFzcyk7XG4gIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH1cblxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0TGlzdCkpIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9kYXRhLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9kYXRhLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9KTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XG4iLCJjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcblxuICAgIHRoaXMuX2hhbmRsZUVzY0tleSA9IHRoaXMuX2hhbmRsZUVzY0tleS5iaW5kKHRoaXMpO1xuXG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NLZXkpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0tleSk7XG5cbiAgfVxuXG4gIF9oYW5kbGVFc2NLZXkoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cCcpIHx8IGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9fY2xvc2UnKSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gIH0pO1xufVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cDtcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7c2VsZWN0b3IsIGhhbmRsZVN1Ym1pdH0pIHtcbiAgICBzdXBlcihzZWxlY3Rvcik7XG5cbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLmZvcm0nKTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtX19pdGVtJyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLmZvcm1fX2tlZXAnKTtcblxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgLy90aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgfVxuXG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHtJbWFnZVBvcHVwLCBpbWFnZU5hbWUsIGltYWdlTGlua30gKSB7XG4gICAgc3VwZXIoSW1hZ2VQb3B1cCk7XG4gICAgdGhpcy5faW1hZ2VOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihpbWFnZU5hbWUpO1xuICAgIHRoaXMuX2ltYWdlTGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoaW1hZ2VMaW5rKTtcbiAgfVxuXG4gIG9wZW4obmFtZSwgbGluaykge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICB0aGlzLl9pbWFnZU5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2ltYWdlTGluay5zcmMgPSBsaW5rO1xuICAgIHRoaXMuX2ltYWdlTGluay5hbHQgPSBuYW1lO1xuXG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRGVsZXRlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3RvcihzZWxlY3RvciwgaGFuZGxlU3VibWl0KSB7XG4gICAgc3VwZXIoc2VsZWN0b3IpO1xuXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XG4gIH1cblxuICBzZXRGb3JtU3VibWl0SGFuZGxlcihoYW5kbGVyKSB7XG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gaGFuZGxlcjtcbn1cblxuc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JyAsIChldnQpID0+IHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQoKTtcblxuICB9KTtcbn1cblxuXG59XG4iLCJjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHtuYW1lLCBhYm91dCwgYXZhdGFyfSkge1xuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWUpO1xuICAgIHRoaXMuX2Fib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhYm91dCk7XG4gICAgdGhpcy5fYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXIpO1xuICB9XG5cbiAgLy/QstC+0LfQstGA0LDRgtC40Lwg0L7QsdGK0LXQutGCINGBINC00LDQvdC90YvQvNC4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xuICBnZXRVc2VySW5mbygpIHtcbiAgICBjb25zdCB1c2VySW5mbyA9IHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXG4gICAgICBhYm91dDogdGhpcy5fYWJvdXQudGV4dENvbnRlbnQsXG4gICAgICAvL2F2YXRhcjogdGhpcy5fYXZhdGFyLnNyY1xuICAgIH1cblxuICAgIHJldHVybiB1c2VySW5mbztcbiAgfVxuICAvL9C/0YDQuNC90LjQvNCw0LXQvCDQvdC+0LLRi9C1INC00LDQvdC90YvQtSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8g0Lgg0LLQvtC30LLRgNCw0YnQsNC10Lwg0L3QsCDRgdGC0YDQsNC90LjRhtGDXG4gIHNldFVzZXJJbmZvKGRhdGEpIHtcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2Fib3V0LnRleHRDb250ZW50ID0gZGF0YS5hYm91dDtcbiAgICAvL3RoaXMuX2F2YXRhci5zcmMgPSBkYXRhLmF2YXRhcjtcbiAgfVxuXG4gIHNldFVzZXJBdmF0YXIoZGF0YSkge1xuICAgIHRoaXMuX2F2YXRhci5zcmMgPSBkYXRhLmF2YXRhciB8fCBkYXRhLmxpbms7XG4gIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBVc2VySW5mbztcblxuIiwiaW1wb3J0IHtwaG90b0VsZW1lbnQsIHByb2ZpbGVFbGVtZW50LCBuYW1lSW5wdXQsIGpvYklucHV0LCBidXR0b25FZGl0LCBidXR0b25BZGQsXG5cbiAgIGNvbmZpZ1ZhbGlkYXRpb24sIGVkaXRBdmF0YXJFbGVtZW50LCBidXR0b25BdmF0YXJ9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XG5cblxuaW1wb3J0ICcuL2luZGV4LmNzcyc7XG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xuaW1wb3J0IFBvcHVwV2l0aERlbGV0ZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhEZWxldGUuanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcbmltcG9ydCBBcGkgZnJvbSAnLi4vY29tcG9uZW50cy9BcGknO1xuXG5cblxuXG5jb25zdCBhcGkgPSBuZXcgQXBpICh7XG4gIHVybDogXCJodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTQxXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiAnY2M2OTJhMzktM2U5MS00ZjMxLTgxYTAtNTZjNWNiYzIwZTEwJyxcbiAgICBcIkNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICB9XG59KTtcblxuXG5Qcm9taXNlLmFsbChbYXBpLmdldFVzZXJJbmZvKCksIGFwaS5nZXRJbml0aWFsQ2FyZCgpXSlcbiAudGhlbigoW3VzZXJEYXRhLCB1c2VyQ2FyZF0pID0+IHtcbiAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJEYXRhKTtcbiAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIodXNlckRhdGEpO1xuICAgdXNlcklkID0gdXNlckRhdGEuX2lkO1xuICAgY3JlYXRlQ2FyZC5yZW5kZXJlZCh1c2VyQ2FyZCk7XG4gfSlcbiAuY2F0Y2goKGVycikgPT4ge1xuICAgY29uc29sZS5sb2coZXJyKTtcbiB9KTtcblxuZnVuY3Rpb24gIHJlbmRlckxvYWRpbmcgKHBvcHVwLCBpc0xvYWRpbmcgPSBmYWxzZSkgIHtcbiAgY29uc3QgYWN0aXZCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtwb3B1cH0gLmZvcm1fX2tlZXBgKTtcbiAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICBhY3RpdkJ1dHRvbi50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLic7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFjdGl2QnV0dG9uLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC40YLRjCc7XG4gICAgfVxuICB9O1xuXG4vL9GB0L7Qt9C00LDQtdC8INGN0LrQt9C10LzQv9C70Y/RgCDQstCw0LvQuNC00LDRhtC40Lgg0YTQvtGA0LxcbmNvbnN0IHZhbGlkYXRlRm9ybVByb2ZpbGUgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWdWYWxpZGF0aW9uLCBwcm9maWxlRWxlbWVudCk7XG5jb25zdCB2YWxpZGF0ZUZvcm1QaG90byA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZ1ZhbGlkYXRpb24sIHBob3RvRWxlbWVudCk7XG5jb25zdCB2YWxpZGF0ZUZvcm1BdmF0YXIgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWdWYWxpZGF0aW9uLGVkaXRBdmF0YXJFbGVtZW50KTtcblxudmFsaWRhdGVGb3JtUHJvZmlsZS5lbmFibGVWYWxpZGF0aW9uKCk7XG52YWxpZGF0ZUZvcm1QaG90by5lbmFibGVWYWxpZGF0aW9uKCk7XG52YWxpZGF0ZUZvcm1BdmF0YXIuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5sZXQgdXNlcklkO1xuXG5cbi8v0L7RgtC60YDRi9GC0LjQtSDRhNC+0YLQvlxuZnVuY3Rpb24gaGFuZGxlQ2FyZENsaWNrIChuYW1lLCBsaW5rKSB7XG4gcG9wdXBCaWdQaG90by5vcGVuKG5hbWUsIGxpbmspO1xufTtcblxuXG4vL9C00L7QsdCw0LLQu9C10L3QuNC1INC70LDQudC60LBcbmZ1bmN0aW9uIGhhbmRsZUxpa2VDbGljayAoY2FyZCwgZGF0YSkge1xuICBjb25zdCBwcm9taXNlID0gY2FyZC5pc0xpa2UoKVxuICA/IGFwaS5kZWxldGVMaWtlKGNhcmQuX2lkKVxuICA6IGFwaS5hZGRMaWtlKGNhcmQuX2lkKTtcblxuICBwcm9taXNlXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIGNhcmQuYWRkTGlrZShkYXRhKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhgJHtlcnJ9YCk7XG4gICAgfSk7XG59O1xuXG5jb25zdCBwb3B1cERlbGV0ZSA9IG5ldyBQb3B1cFdpdGhEZWxldGUoJy5wb3B1cF90eXBlX2RlbGV0ZS1waG90bycpO1xucG9wdXBEZWxldGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQ2xpY2soY2FyZCkge1xuICBwb3B1cERlbGV0ZS5zZXRGb3JtU3VibWl0SGFuZGxlcigoKSA9PiB7XG4gICAgYXBpLmRlbGV0ZUNhcmQoY2FyZC5faWQpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNhcmQucmVtb3ZlQ2FyZCgpO1xuICAgICAgICBwb3B1cERlbGV0ZS5jbG9zZSgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke2Vycn1gKTtcbiAgfSlcbn0pO1xucG9wdXBEZWxldGUub3BlbigpO1xufVxuXG5cbmZ1bmN0aW9uIHJlbmRlcmVyQ2FyZCAoZGF0YSwgdXNlcklkLCBjcmVhdGVDYXJkKSB7XG4gY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgZGF0YSxcbiAgJy5waG90by10ZW1wbGF0ZScsXG4gIHVzZXJJZCxcbiAgaGFuZGxlQ2FyZENsaWNrLHtcbiAgICBoYW5kbGVEZWxldGVDbGljazogKCkgPT4gaGFuZGxlRGVsZXRlQ2xpY2soY2FyZCksXG4gICAgaGFuZGxlTGlrZUNsaWNrOiAoKSA9PiBoYW5kbGVMaWtlQ2xpY2soY2FyZCwgZGF0YSkgfSk7XG5cbiBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG5cbiBjcmVhdGVDYXJkLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xuIC8vcmV0dXJuIGNhcmRFbGVtZW50O1xufTtcblxuLy/RgdC+0LfQtNCw0LXQvCDRjdC60LfQtdC/0LvRj9GAINC60LDRgNGC0L7Rh9C60LhcbmNvbnN0IGNyZWF0ZUNhcmQgPSBuZXcgU2VjdGlvbih7XG4gIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgIHJlbmRlcmVyQ2FyZChpdGVtLCB1c2VySWQsIGNyZWF0ZUNhcmQpO1xuICB9LFxufSwgJy5waG90bycpO1xuXG4vL9C40L3RhNC+INC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtVxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lOiAnLnByb2ZpbGVfX25hbWUnLFxuICBhYm91dDogJy5wcm9maWxlX19qb2InLFxuICBhdmF0YXI6ICcucHJvZmlsZV9faW1hZ2UnXG4gfSk7XG5cbiBjb25zdCBwb3B1cEJpZ1Bob3RvID0gbmV3IFBvcHVwV2l0aEltYWdlKHtcbiAgSW1hZ2VQb3B1cDogJy5wb3B1cF90eXBlX29wZW4tcGhvdG8nLFxuICBpbWFnZU5hbWU6ICcucG9wdXBfX3Bob3RvLWNhcHRpb24nLFxuICBpbWFnZUxpbms6ICcucG9wdXBfX2JpZy1waG90bydcbiB9KTtcblxuIHBvcHVwQmlnUGhvdG8uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuXG4gY29uc3QgdXNlciA9IG5ldyBVc2VySW5mbyh7bmFtZTogJy5wcm9maWxlX19uYW1lJywgYWJvdXQ6ICcucHJvZmlsZV9fam9iJ30pO1xuXG4vL9C00L7QsdCw0LLQu9C10L3QuNC1INC60LDRgNGC0L7Rh9C10LpcbmNvbnN0IHBvcHVwQWRkQ2FyZCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgc2VsZWN0b3I6ICcucG9wdXBfdHlwZV9waG90bycsXG4gIGhhbmRsZVN1Ym1pdDogKGl0ZW0pID0+IHtcbiAgICByZW5kZXJMb2FkaW5nKCdwb3B1cF90eXBlX3Bob3RvJyx0cnVlKTtcbiAgIGFwaVxuICAgLnBvc3ROZXdDYXJkKGl0ZW0pXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICByZW5kZXJlckNhcmQoZGF0YSwgdXNlcklkLCBjcmVhdGVDYXJkKTtcbiAgICAgICAgcG9wdXBBZGRDYXJkLmNsb3NlKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHJlbmRlckxvYWRpbmcoJ3BvcHVwX3R5cGVfcGhvdG8nLCBmYWxzZSk7XG4gICAgICB9KVxuICB9XG4gIH0pO1xuICBwb3B1cEFkZENhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy/QutC90L7Qv9C60LAg0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LXQulxuICBidXR0b25BZGQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgdmFsaWRhdGVGb3JtUGhvdG8ucmVzZXRWYWxpZGF0aW9uKCk7XG4gICAgcG9wdXBBZGRDYXJkLm9wZW4oKTtcbiAgIH0pO1xuXG4vL9C00L7QsdCw0LLQu9C10L3QuNC1INCw0LLQsNGC0LDRgNCwXG5jb25zdCBwb3B1cFNldEF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgc2VsZWN0b3I6ICcucG9wdXBfdHlwZV9hdmF0YXInLFxuICBoYW5kbGVTdWJtaXQ6IChpdGVtKSA9PiB7XG4gICAgcmVuZGVyTG9hZGluZygncG9wdXBfdHlwZV9hdmF0YXInICwgdHJ1ZSk7XG4gICAgYXBpXG4gICAgLnNldEF2YXRhcihpdGVtKVxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckF2YXRhcihkYXRhKTtcbiAgICAgICAgcG9wdXBTZXRBdmF0YXIuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhgJHtlcnJ9YCk7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICByZW5kZXJMb2FkaW5nKCdwb3B1cF90eXBlX2F2YXRhcicsIGZhbHNlKTtcbiAgICAgIH0pXG59XG59KTtcbnBvcHVwU2V0QXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8v0LrQvdC+0L/QutCwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0LDQstCw0YLQsNGA0LBcbmJ1dHRvbkF2YXRhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgdmFsaWRhdGVGb3JtQXZhdGFyLnJlc2V0VmFsaWRhdGlvbigpO1xuICBwb3B1cFNldEF2YXRhci5vcGVuKCk7XG4gfSk7XG5cblxuIC8v0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjQtSDQv9GA0L7RhNC40LvRj1xuIGNvbnN0IHBvcHVwRWRpdFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gICBzZWxlY3RvcjogJy5wb3B1cF90eXBlX3Byb2ZpbGUnLFxuICAgaGFuZGxlU3VibWl0OiAoaXRlbSkgPT4ge1xuICAgIHJlbmRlckxvYWRpbmcoJ3BvcHVwX3R5cGVfcHJvZmlsZScgLCB0cnVlKTtcbiAgICBhcGlcbiAgICAuc2V0VXNlckluZm8oaXRlbSlcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgIHVzZXIuc2V0VXNlckluZm8oZGF0YSk7XG4gICAgICAgIHBvcHVwRWRpdFByb2ZpbGUuY2xvc2UoKTtcbiAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYCR7ZXJyfWApO1xuICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHJlbmRlckxvYWRpbmcoJ3BvcHVwX3R5cGVfcHJvZmlsZScgLCBmYWxzZSk7XG4gICAgICB9KVxuICAgfVxuIH0pO1xuXG5cbiBwb3B1cEVkaXRQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4vL9C60L3QvtC/0LrQsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPXG4gYnV0dG9uRWRpdC5hZGRFdmVudExpc3RlbmVyKCAnY2xpY2snLCAoKSA9PiB7XG4gIGNvbnN0IHVzZXJEYXRhID0gdXNlci5nZXRVc2VySW5mbygpO1xuICBuYW1lSW5wdXQudmFsdWUgPSB1c2VyRGF0YS5uYW1lO1xuICBqb2JJbnB1dC52YWx1ZSA9IHVzZXJEYXRhLmFib3V0O1xuICBwb3B1cEVkaXRQcm9maWxlLm9wZW4oKTtcbiAgdmFsaWRhdGVGb3JtUHJvZmlsZS5yZXNldFZhbGlkYXRpb24oKTtcbiB9KTtcblxuXG5cblxuXG5cblxuIiwiXG5jbGFzcyBBcGkge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy5fdXJsID0gb3B0aW9ucy51cmw7XG4gICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRSZXNwb25zZURhdGEocmVzKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRSZXNwb25zZURhdGEocmVzKTtcbiAgfSk7XG59XG5cbnNldFVzZXJJbmZvKGl0ZW0pIHtcbiAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7XG4gICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgbmFtZTogaXRlbS5uYW1lLFxuICAgICAgYWJvdXQ6IGl0ZW0uYWJvdXQsXG4gICAgfSksXG4gIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgIHJldHVybiB0aGlzLmdldFJlc3BvbnNlRGF0YShyZXMpO1xuICB9KTtcbn1cblxuICBzZXRBdmF0YXIoYXZhdGFyKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGF2YXRhciksXG4gICAgICB9KVxuICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmdldFJlc3BvbnNlRGF0YShyZXMpO1xuICAgIH0pO1xuICB9XG5cbiAgcG9zdE5ld0NhcmQoZGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICAgIGxpbms6IGRhdGEubGluayxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0UmVzcG9uc2VEYXRhKHJlcyk7XG4gICAgfSk7XG4gIH1cblxuICBkZWxldGVDYXJkKGlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtpZH1gLCB7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmdldFJlc3BvbnNlRGF0YShyZXMpO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkTGlrZShpZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRSZXNwb25zZURhdGEocmVzKTtcbiAgICB9KTtcbiAgfVxuXG4gIGRlbGV0ZUxpa2UoaWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0UmVzcG9uc2VEYXRhKHJlcyk7XG4gICAgfSk7XG4gIH1cblxuICBnZXRSZXNwb25zZURhdGEocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfVxuICB9XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgQXBpO1xuIl0sIm5hbWVzIjpbInBob3RvRWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInByb2ZpbGVFbGVtZW50IiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJidXR0b25FZGl0IiwiYnV0dG9uQWRkIiwiZWRpdEF2YXRhckVsZW1lbnQiLCJidXR0b25BdmF0YXIiLCJjb25maWdWYWxpZGF0aW9uIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJDYXJkIiwiZGF0YSIsInNlbGVjdG9yIiwidXNlcklkIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2xpa2VzIiwibGlrZXMiLCJfdXNlcklkIiwiX2lkIiwiX293bmVySWQiLCJvd25lciIsIl9zZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9idXR0b25EZWxldGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJfZWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsImltYWdlIiwiX2J1dHRvbkxpa2UiLCJfbGlrZUNvdW50IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJsZW5ndGgiLCJzb21lIiwiaXRlbSIsIl9nZXRWaWV3IiwiX2lzTGlrZSIsImZpbHRlciIsInJlbW92ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlSW1hZ2VDbGljayIsImV2dCIsInRhcmdldCIsImNvbnRhaW5zIiwiU2VjdGlvbiIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW1zIiwicmV2ZXJzZSIsImZvckVhY2giLCJlbGVtZW50IiwicHJlcGVuZCIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsIl9kYXRhIiwiX2Zvcm1FbGVtZW50IiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfYnV0dG9uRWxlbWVudCIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hhc0ludmFsaWRJbnB1dCIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJQb3B1cCIsIl9wb3B1cCIsIl9oYW5kbGVFc2NLZXkiLCJiaW5kIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsImNsb3NlIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZVN1Ym1pdCIsIl9mb3JtIiwiX3N1Ym1pdEJ1dHRvbiIsIl9oYW5kbGVTdWJtaXQiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiUG9wdXBXaXRoSW1hZ2UiLCJJbWFnZVBvcHVwIiwiaW1hZ2VOYW1lIiwiaW1hZ2VMaW5rIiwiX2ltYWdlTmFtZSIsIl9pbWFnZUxpbmsiLCJQb3B1cFdpdGhEZWxldGUiLCJoYW5kbGVyIiwiVXNlckluZm8iLCJhYm91dCIsImF2YXRhciIsIl9hYm91dCIsIl9hdmF0YXIiLCJhcGkiLCJBcGkiLCJvcHRpb25zIiwiX3VybCIsInVybCIsIl9oZWFkZXJzIiwiaGVhZGVycyIsImZldGNoIiwibWV0aG9kIiwidGhlbiIsInJlcyIsImdldFJlc3BvbnNlRGF0YSIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5Iiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImF1dGhvcml6YXRpb24iLCJyZW5kZXJMb2FkaW5nIiwicG9wdXAiLCJpc0xvYWRpbmciLCJhY3RpdkJ1dHRvbiIsImFsbCIsImdldFVzZXJJbmZvIiwiZ2V0SW5pdGlhbENhcmQiLCJ1c2VyRGF0YSIsInVzZXJDYXJkIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsInNldFVzZXJBdmF0YXIiLCJjcmVhdGVDYXJkIiwicmVuZGVyZWQiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJ2YWxpZGF0ZUZvcm1Qcm9maWxlIiwidmFsaWRhdGVGb3JtUGhvdG8iLCJ2YWxpZGF0ZUZvcm1BdmF0YXIiLCJwb3B1cEJpZ1Bob3RvIiwib3BlbiIsImVuYWJsZVZhbGlkYXRpb24iLCJwb3B1cERlbGV0ZSIsInJlbmRlcmVyQ2FyZCIsImNhcmQiLCJzZXRGb3JtU3VibWl0SGFuZGxlciIsImRlbGV0ZUNhcmQiLCJyZW1vdmVDYXJkIiwiaXNMaWtlIiwiZGVsZXRlTGlrZSIsImFkZExpa2UiLCJjYXJkRWxlbWVudCIsImdlbmVyYXRlQ2FyZCIsImFkZEl0ZW0iLCJzZXRFdmVudExpc3RlbmVycyIsInVzZXIiLCJwb3B1cEFkZENhcmQiLCJwb3N0TmV3Q2FyZCIsImZpbmFsbHkiLCJyZXNldFZhbGlkYXRpb24iLCJwb3B1cFNldEF2YXRhciIsInNldEF2YXRhciIsInBvcHVwRWRpdFByb2ZpbGUiXSwic291cmNlUm9vdCI6IiJ9