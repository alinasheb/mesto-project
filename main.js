(()=>{"use strict";var e=document.querySelector(".form_type_photo"),t=document.querySelector(".form_type_profile"),n=t.querySelector(".form__item_type_name"),r=t.querySelector(".form__item_type_job"),o=document.querySelector(".profile__edit"),i=document.querySelector(".profile__add"),a=document.querySelector(".form_type_avatar"),u=document.querySelector(".profile__photo-add"),c={formSelector:".form",inputSelector:".form__item",submitButtonSelector:".form__keep",inactiveButtonClass:"form__keep_inactive",inputErrorClass:"form__item_type_error",errorClass:"form__item-error_active"};function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t,n,r,o,i){var a=i.handleDeleteClick,u=i.handleLikeClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._likes=t.likes,this._userId=r,this._id=t._id,this._ownerId=t.owner._id,this._selector=n,this._handleCardClick=o,this._handleDeleteClick=a,this._handleLikeClick=u}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._selector).content.querySelector(".photo__card").cloneNode(!0)}},{key:"_getView",value:function(){this._ownerId===this._userId&&this._buttonDelete.classList.add("photo__delete_show")}},{key:"generateCard",value:function(){var e=this;this._element=this._getTemplate();var t=this._element.querySelector(".photo__image");return this._buttonLike=this._element.querySelector(".photo__like"),this._likeCount=this._element.querySelector(".photo__like-counter"),this._buttonDelete=this._element.querySelector(".photo__delete"),this._setEventListeners(),t.src=this._link,t.alt=this._name,this._element.querySelector(".photo__title").textContent=this._name,this._likeCount.textContent=this._likes.length,this._getView(),this._likes.find((function(t){return e._userId===t._id}))&&this._buttonLike.classList.add("photo__like_active"),this._element}},{key:"isLike",value:function(){return this._isLike}},{key:"addLike",value:function(e){var t=this;this._isLike=e.likes.filter((function(e){return e._id===t._userId})).length>0,this._likeCount.textContent=e.likes.length,this._isLike?this._buttonLike.classList.add("photo__like_active"):this._buttonLike.classList.remove("photo__like_active")}},{key:"removeCard",value:function(){this._element.remove(),this._element=null}},{key:"_handleImageClick",value:function(){this._handleCardClick(this._name,this._link)}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".photo__image").addEventListener("click",(function(){e._handleImageClick()})),this._buttonDelete.addEventListener("click",(function(){e._handleDeleteClick()})),this._buttonLike.addEventListener("click",(function(t){e._handleLikeClick(e,t.target.classList.contains("photo__like_active"))}))}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const p=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"rendered",value:function(e){var t=this;e.reverse().forEach((function(e){return t._renderer(e)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&f(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const y=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=t,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._data.inputSelector)),this._buttonElement=this._formElement.querySelector(this._data.submitButtonSelector)}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._data.inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._data.errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._data.inputErrorClass),t.classList.remove(this._data.errorClass),t.textContent=""}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput(this._inputList)?(this._buttonElement.classList.add(this._data.inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)):(this._buttonElement.classList.remove(this._data.inactiveButtonClass),this._buttonElement.removeAttribute("disabled",!0))}},{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"enableValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}}])&&h(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._handleEscKey=this._handleEscKey.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscKey)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscKey)}},{key:"_handleEscKey",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){(t.target.classList.contains("popup")||t.target.classList.contains("popup__close"))&&e.close()}))}}])&&_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=k(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},b.apply(this,arguments)}function k(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function w(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(r);if(o){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return w(this,e)});function a(e){var t,n=e.selector,r=e.handleSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._form=t._popup.querySelector(".form"),t._inputList=t._form.querySelectorAll(".form__item"),t._submitButton=t._popup.querySelector(".form__keep"),t._handleSubmit=r,t}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;b(E(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleSubmit(e._getInputValues())}))}},{key:"close",value:function(){b(E(a.prototype),"close",this).call(this),this._form.reset()}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(d);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=C(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},j.apply(this,arguments)}function C(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}function I(e,t){if(t&&("object"===O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}var q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=R(r);if(o){var n=R(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return I(this,e)});function a(e){var t,n=e.ImagePopup,r=e.imageName,o=e.imageLink;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._imageName=document.querySelector(r),t._imageLink=document.querySelector(o),t}return t=a,(n=[{key:"open",value:function(e,t){j(R(a.prototype),"open",this).call(this),this._imageName.textContent=e,this._imageLink.src=t,this._imageLink.alt=e}}])&&L(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(d);function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(){return x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=A(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},x.apply(this,arguments)}function A(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=U(e)););return e}function V(e,t){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},V(e,t)}function B(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function U(e){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},U(e)}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=U(r);if(o){var n=U(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return B(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._form=n._popup.querySelector(".form"),n}return t=a,(n=[{key:"setFormSubmitHandler",value:function(e){this.setFormSubmitHandler=e}},{key:"setEventListeners",value:function(){var e=this;x(U(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e.setFormSubmitHandler()}))}}])&&T(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(d);function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const K=function(){function e(t){var n=t.name,r=t.about,o=t.avatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._about=document.querySelector(r),this._avatar=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,about:this._about.textContent}}},{key:"setUserInfo",value:function(e){this._name.textContent=e.name,this._about.textContent=e.about}},{key:"setUserAvatar",value:function(e){this._avatar.src=e.avatar||e.link}}])&&H(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var G=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=t.url,this._headers=t.headers}var t,n;return t=e,(n=[{key:"getInitialCard",value:function(){var e=this;return fetch("".concat(this._url,"/cards"),{method:"GET",headers:this._headers}).then((function(t){return e.getResponseData(t)}))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this._url,"/users/me"),{method:"GET",headers:this._headers}).then((function(t){return e.getResponseData(t)}))}},{key:"setUserInfo",value:function(e){var t=this;return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return t.getResponseData(e)}))}},{key:"setAvatar",value:function(e){var t=this;return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then((function(e){return t.getResponseData(e)}))}},{key:"postNewCard",value:function(e){var t=this;return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return t.getResponseData(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t.getResponseData(e)}))}},{key:"addLike",value:function(e){var t=this;return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then((function(e){return t.getResponseData(e)}))}},{key:"deleteLike",value:function(e){var t=this;return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then((function(e){return t.getResponseData(e)}))}},{key:"getResponseData",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}}])&&F(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}())({url:"https://mesto.nomoreparties.co/v1/cohort-41",headers:{authorization:"cc692a39-3e91-4f31-81a0-56c5cbc20e10","Content-type":"application/json"}});function M(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.querySelector(".".concat(e," .form__keep"));n.textContent=t?"Сохранение...":"Сохранить"}Promise.all([G.getUserInfo(),G.getInitialCard()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];te.setUserInfo(o),te.setUserAvatar(o),z=o._id,ee.rendered(i)})).catch((function(e){console.log(e)}));var z,$=new y(c,t),Q=new y(c,e),W=new y(c,a);function X(e,t){ne.open(e,t)}$.enableValidation(),Q.enableValidation(),W.enableValidation();var Y=new N(".popup_type_delete-photo");function Z(e,t,n){var r=new l(e,".photo-template",t,X,{handleDeleteClick:function(){return function(e){Y.setFormSubmitHandler((function(){G.deleteCard(e._id).then((function(){e.removeCard(),Y.close()})).catch((function(e){console.log("".concat(e))}))})),Y.open()}(r)},handleLikeClick:function(){return function(e,t){(e.isLike()?G.deleteLike(e._id):G.addLike(e._id)).then((function(t){e.addLike(t)})).catch((function(e){console.log("".concat(e))}))}(r)}}),o=r.generateCard();n.addItem(o)}Y.setEventListeners();var ee=new p({renderer:function(e){Z(e,z,ee)}},".photo"),te=new K({name:".profile__name",about:".profile__job",avatar:".profile__image"}),ne=new q({ImagePopup:".popup_type_open-photo",imageName:".popup__photo-caption",imageLink:".popup__big-photo"});ne.setEventListeners();var re=new K({name:".profile__name",about:".profile__job"}),oe=new S({selector:".popup_type_photo",handleSubmit:function(e){M("popup_type_photo",!0),G.postNewCard(e).then((function(e){Z(e,z,ee),oe.close()})).catch((function(e){console.log(e)})).finally((function(){M("popup_type_photo",!1)}))}});oe.setEventListeners(),i.addEventListener("click",(function(){Q.resetValidation(),oe.open()}));var ie=new S({selector:".popup_type_avatar",handleSubmit:function(e){M("popup_type_avatar",!0),G.setAvatar(e).then((function(e){te.setUserAvatar(e),ie.close()})).catch((function(e){console.log("".concat(e))})).finally((function(){M("popup_type_avatar",!1)}))}});ie.setEventListeners(),u.addEventListener("click",(function(){W.resetValidation(),ie.open()}));var ae=new S({selector:".popup_type_profile",handleSubmit:function(e){M("popup_type_profile",!0),G.setUserInfo(e).then((function(e){re.setUserInfo(e),ae.close()})).catch((function(e){console.log("".concat(e))})).finally((function(){M("popup_type_profile",!1)}))}});ae.setEventListeners(),o.addEventListener("click",(function(){var e=re.getUserInfo();n.value=e.name,r.value=e.about,ae.open(),$.resetValidation()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFRQyxJQUFSLFVBQWVGLE9BRWhCd0IsU0FBUSxXQUNQdkMsRUFBYyxzQkFBdUIsU0FNNUMyQyxHQUFpQlIsb0JBRWpCbkwsRUFBV3NELGlCQUFrQixTQUFTLFdBQ3JDLElBQU1pRyxFQUFXNkIsR0FBSy9CLGNBQ3RCdkosRUFBVTJHLE1BQVE4QyxFQUFTbkksS0FDM0JyQixFQUFTMEcsTUFBUThDLEVBQVNoQyxNQUMxQm9FLEdBQWlCckIsT0FDakJKLEVBQW9Cc0Isc0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGlrdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWt1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGlrdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWt1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWt1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRGVsZXRlLmpzIiwid2VicGFjazovL3ByYWN0aWt1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWt1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGlrdW0vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHBob3RvRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX3R5cGVfcGhvdG8nKTsgLy/RhNC+0YDQvNCwINC00L7QsdCw0LLQu9C10L3QuNGPLdGB0L7RhdGA0LDQvdC10L3QuNGPINGE0L7RgtC+XG5leHBvcnQgY29uc3QgcHJvZmlsZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV90eXBlX3Byb2ZpbGUnKTsgLy/RhNC+0YDQvNCwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8t0YHQvtGF0YDQsNC90LXQvdC40Y8gINC/0YDQvtGE0LjQu9GPXG5leHBvcnQgY29uc3QgbmFtZUlucHV0ID0gcHJvZmlsZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fX2l0ZW1fdHlwZV9uYW1lJyk7IC8v0L/QvtC70LUg0LLQstC+0LTQsCDQuNC80LXQvdC4ICEhXG5leHBvcnQgY29uc3Qgam9iSW5wdXQgPSBwcm9maWxlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9faXRlbV90eXBlX2pvYicpOyAvL9C/0L7Qu9C1INCy0LLQvtC0INGA0LDQsdC+0YLRiyAhIVxuZXhwb3J0IGNvbnN0IGJ1dHRvbkVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdCcpOyAvL9C60L3QvtC/0LrQsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPLdC+0YLQutGA0YvRgtGMINC/0L7Qv9Cw0L8g0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRj1xuZXhwb3J0IGNvbnN0IGJ1dHRvbkFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQnKTsgLy/QutC90L7Qv9C60LAg0LTQvtCx0LDQstC70LXQvdC40Y8g0YTQvtGC0L4t0L7RgtC60YDRi9GC0Ywg0L/QvtC/0LDQvyDQtNC+0LHQsNCy0LvQtdC90LjRjyDRhNC+0YLQvlxuZXhwb3J0IGNvbnN0IGVkaXRBdmF0YXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fdHlwZV9hdmF0YXInKTtcbmV4cG9ydCBjb25zdCBidXR0b25BdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fcGhvdG8tYWRkJyk7XG5cblxuZXhwb3J0IGNvbnN0IGNvbmZpZ1ZhbGlkYXRpb24gPSB7XG4gIGZvcm1TZWxlY3RvcjogJy5mb3JtJyxcbiAgaW5wdXRTZWxlY3RvcjogJy5mb3JtX19pdGVtJyxcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcuZm9ybV9fa2VlcCcsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdmb3JtX19rZWVwX2luYWN0aXZlJyxcbiAgaW5wdXRFcnJvckNsYXNzOiAnZm9ybV9faXRlbV90eXBlX2Vycm9yJyxcbiAgZXJyb3JDbGFzczogJ2Zvcm1fX2l0ZW0tZXJyb3JfYWN0aXZlJyxcbiB9O1xuXG5cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCAgc2VsZWN0b3IsIHVzZXJJZCwgaGFuZGxlQ2FyZENsaWNrLCB7aGFuZGxlRGVsZXRlQ2xpY2ssIGhhbmRsZUxpa2VDbGlja30pIHtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcbiAgICB0aGlzLl9pZCA9IGRhdGEuX2lkO1xuICAgIHRoaXMuX293bmVySWQgPSBkYXRhLm93bmVyLl9pZDtcbiAgICB0aGlzLl9zZWxlY3RvciA9IHNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayA9IGhhbmRsZURlbGV0ZUNsaWNrO1xuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcbiAgfVxuXG4gIC8v0L/QvtC70YPRh9Cw0LXQvCDRiNCw0LHQu9C+0L0g0LrQsNGA0YLQvtGH0LrQuFxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9yKVxuICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5waG90b19fY2FyZCcpXG4gICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxuXG4gIF9nZXRWaWV3KCkge1xuICAgIGlmKHRoaXMuX293bmVySWQgPT09ICB0aGlzLl91c2VySWQpIHtcbiAgICAgIHRoaXMuX2J1dHRvbkRlbGV0ZS5jbGFzc0xpc3QuYWRkKCdwaG90b19fZGVsZXRlX3Nob3cnKTtcbiAgICB9XG4gIH1cblxuXG5cbiAgLy/Qs9C+0YLQvtCy0LDRjyDQutCw0YDRgtC+0YfQutCwXG5nZW5lcmF0ZUNhcmQoKSB7XG4gIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICBjb25zdCBpbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLnBob3RvX19pbWFnZScpO1xuXG4gIHRoaXMuX2J1dHRvbkxpa2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5waG90b19fbGlrZScpO1xuICB0aGlzLl9saWtlQ291bnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5waG90b19fbGlrZS1jb3VudGVyJyk7XG4gIHRoaXMuX2J1dHRvbkRlbGV0ZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLnBob3RvX19kZWxldGUnKTtcblxuXG4gIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cblxuICBpbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICBpbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5waG90b19fdGl0bGUnKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG5cbiAgdGhpcy5fbGlrZUNvdW50LnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuXG4gIHRoaXMuX2dldFZpZXcoKTtcblxuICBpZiAodGhpcy5fbGlrZXMuZmluZCgoaXRlbSkgPT4gdGhpcy5fdXNlcklkID09PSBpdGVtLl9pZCkpIHtcbiAgICB0aGlzLl9idXR0b25MaWtlLmNsYXNzTGlzdC5hZGQoJ3Bob3RvX19saWtlX2FjdGl2ZScpO1xuICB9XG4gIHJldHVybiB0aGlzLl9lbGVtZW50O1xufVxuXG5cblxuaXNMaWtlKCkge1xuICByZXR1cm4gdGhpcy5faXNMaWtlO1xufVxuXG5hZGRMaWtlKGRhdGEpICB7XG4gIHRoaXMuX2lzTGlrZSA9IGRhdGEubGlrZXMuZmlsdGVyKChpdGVtKSA9PiB7cmV0dXJuIGl0ZW0uX2lkID09PSB0aGlzLl91c2VySWQ7fSkubGVuZ3RoID4gMDtcbiAgdGhpcy5fbGlrZUNvdW50LnRleHRDb250ZW50ID0gZGF0YS5saWtlcy5sZW5ndGg7XG4gIGlmKHRoaXMuX2lzTGlrZSkge1xuICAgIHRoaXMuX2J1dHRvbkxpa2UuY2xhc3NMaXN0LmFkZCgncGhvdG9fX2xpa2VfYWN0aXZlJyk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5fYnV0dG9uTGlrZS5jbGFzc0xpc3QucmVtb3ZlKCdwaG90b19fbGlrZV9hY3RpdmUnKTtcbiAgfVxufVxuXG5cbnJlbW92ZUNhcmQoKSB7XG4gIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xufVxuXG4vL9C90LDQttC40LzQsNC10YIg0L3QsCDQutCw0YDRgtC+0YfQutGDXG5faGFuZGxlSW1hZ2VDbGljaygpIHtcbiAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspO1xufVxuXG4vL9GB0LvRg9GI0LDRgtC10LvQuFxuX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuXG4gIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLnBob3RvX19pbWFnZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyAsICgpID0+IHtcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKCk7XG4gIH0pO1xuXG4gIHRoaXMuX2J1dHRvbkRlbGV0ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycgLCAoKSA9PiB7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2soKTtcbiAgfSk7XG5cbiAgdGhpcy5fYnV0dG9uTGlrZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycgLCAoZXZ0KSA9PiB7XG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKHRoaXMsXG4gICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncGhvdG9fX2xpa2VfYWN0aXZlJykpO1xuICB9KTtcbn1cblxufVxuIiwiY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yICh7cmVuZGVyZXJ9LCBzZWxlY3Rvcikge1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG5cbiAgfVxuICAvKnJlbmRlcmVkKGl0ZW1zKSB7XG4gICAgaXRlbXMucmV2ZXJzZSgpLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICAgIHRoaXMuYWRkSXRlbShlbGVtZW50KTtcbiAgICB9KTtcbiAgfSovXG5cbiAgcmVuZGVyZWQoaXRlbXMpIHtcbiAgICBpdGVtcy5yZXZlcnNlKCkuZm9yRWFjaChpdGVtID0+IHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcbn1cblxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNlY3Rpb247XG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoZGF0YSwgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9kYXRhLmlucHV0U2VsZWN0b3IpKTtcblxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2RhdGEuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yIChpbnB1dEVsZW1lbnQpIHtcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuXG4gIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2RhdGEuaW5wdXRFcnJvckNsYXNzKTtcbiAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9kYXRhLmVycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yIChpbnB1dEVsZW1lbnQpIHtcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuXG4gIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2RhdGEuaW5wdXRFcnJvckNsYXNzKTtcbiAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZGF0YS5lcnJvckNsYXNzKTtcbiAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfVxuXG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRMaXN0KSkge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2RhdGEuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2RhdGEuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICB9XG4gIH1cblxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcbiIsImNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuXG4gICAgdGhpcy5faGFuZGxlRXNjS2V5ID0gdGhpcy5faGFuZGxlRXNjS2V5LmJpbmQodGhpcyk7XG5cbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0tleSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjS2V5KTtcblxuICB9XG5cbiAgX2hhbmRsZUVzY0tleShldnQpIHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwJykgfHwgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZScpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgfSk7XG59XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwO1xuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHtzZWxlY3RvciwgaGFuZGxlU3VibWl0fSkge1xuICAgIHN1cGVyKHNlbGVjdG9yKTtcblxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcuZm9ybScpO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnLmZvcm1fX2l0ZW0nKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9fa2VlcCcpO1xuXG5cbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgIC8vdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgXG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gIH1cblxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7SW1hZ2VQb3B1cCwgaW1hZ2VOYW1lLCBpbWFnZUxpbmt9ICkge1xuICAgIHN1cGVyKEltYWdlUG9wdXApO1xuICAgIHRoaXMuX2ltYWdlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoaW1hZ2VOYW1lKTtcbiAgICB0aGlzLl9pbWFnZUxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGltYWdlTGluayk7XG4gIH1cblxuICBvcGVuKG5hbWUsIGxpbmspIHtcbiAgICBzdXBlci5vcGVuKCk7XG4gICAgdGhpcy5faW1hZ2VOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9pbWFnZUxpbmsuc3JjID0gbGluaztcbiAgICB0aGlzLl9pbWFnZUxpbmsuYWx0ID0gbmFtZTtcblxuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aERlbGV0ZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3IsIGhhbmRsZVN1Ym1pdCkge1xuICAgIHN1cGVyKHNlbGVjdG9yKTtcbiAgICAvL3RoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLmZvcm0nKTtcbiAgfVxuXG4gIHNldEZvcm1TdWJtaXRIYW5kbGVyKGhhbmRsZXIpIHtcbiAgICB0aGlzLnNldEZvcm1TdWJtaXRIYW5kbGVyID0gaGFuZGxlcjtcbn1cblxuc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JyAsIChldnQpID0+IHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLnNldEZvcm1TdWJtaXRIYW5kbGVyKCk7XG4gIH0pO1xufVxuIC8vc2V0Q2FyZERhdGEoY2FyZCkge1xuICAgLy90aGlzLl9pZCA9IGNhcmQuX2lkO1xuICAgLy90aGlzLl9jYXJkID0gY2FyZDtcbiAvL31cblxufVxuIiwiY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7bmFtZSwgYWJvdXQsIGF2YXRhcn0pIHtcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lKTtcbiAgICB0aGlzLl9hYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWJvdXQpO1xuICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyKTtcbiAgfVxuXG4gIC8v0LLQvtC30LLRgNCw0YLQuNC8INC+0LHRitC10LrRgiDRgSDQtNCw0L3QvdGL0LzQuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgY29uc3QgdXNlckluZm8gPSB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxuICAgICAgYWJvdXQ6IHRoaXMuX2Fib3V0LnRleHRDb250ZW50LFxuICAgICAgLy9hdmF0YXI6IHRoaXMuX2F2YXRhci5zcmNcbiAgICB9XG5cbiAgICByZXR1cm4gdXNlckluZm87XG4gIH1cbiAgLy/Qv9GA0LjQvdC40LzQsNC10Lwg0L3QvtCy0YvQtSDQtNCw0L3QvdGL0LUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPINC4INCy0L7Qt9Cy0YDQsNGJ0LDQtdC8INC90LAg0YHRgtGA0LDQvdC40YbRg1xuICBzZXRVc2VySW5mbyhkYXRhKSB7XG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9hYm91dC50ZXh0Q29udGVudCA9IGRhdGEuYWJvdXQ7XG4gICAgLy90aGlzLl9hdmF0YXIuc3JjID0gZGF0YS5hdmF0YXI7XG4gIH1cblxuICBzZXRVc2VyQXZhdGFyKGRhdGEpIHtcbiAgICB0aGlzLl9hdmF0YXIuc3JjID0gZGF0YS5hdmF0YXIgfHwgZGF0YS5saW5rO1xuICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgVXNlckluZm87XG5cbiIsImltcG9ydCB7cGhvdG9FbGVtZW50LCBwcm9maWxlRWxlbWVudCwgbmFtZUlucHV0LCBqb2JJbnB1dCwgYnV0dG9uRWRpdCwgYnV0dG9uQWRkLFxuICAgY29uZmlnVmFsaWRhdGlvbiwgZWRpdEF2YXRhckVsZW1lbnQsIGJ1dHRvbkF2YXRhcn0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcblxuaW1wb3J0ICcuL2luZGV4LmNzcyc7XG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xuaW1wb3J0IFBvcHVwV2l0aERlbGV0ZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhEZWxldGUuanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcbmltcG9ydCBBcGkgZnJvbSAnLi4vY29tcG9uZW50cy9BcGknO1xuXG5cblxuY29uc3QgYXBpID0gbmV3IEFwaSAoe1xuICB1cmw6IFwiaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC00MVwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogJ2NjNjkyYTM5LTNlOTEtNGYzMS04MWEwLTU2YzVjYmMyMGUxMCcsXG4gICAgXCJDb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgfVxufSk7XG5cblxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0SW5pdGlhbENhcmQoKV0pXG4gLnRoZW4oKFt1c2VyRGF0YSwgdXNlckNhcmRdKSA9PiB7XG4gICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YSk7XG4gICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHVzZXJEYXRhKTtcbiAgIHVzZXJJZCA9IHVzZXJEYXRhLl9pZDtcbiAgIGNyZWF0ZUNhcmQucmVuZGVyZWQodXNlckNhcmQpO1xuIH0pXG4gLmNhdGNoKChlcnIpID0+IHtcbiAgIGNvbnNvbGUubG9nKGVycik7XG4gfSk7XG5cbmZ1bmN0aW9uICByZW5kZXJMb2FkaW5nIChwb3B1cCwgaXNMb2FkaW5nID0gZmFsc2UpICB7XG4gIGNvbnN0IGFjdGl2QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7cG9wdXB9IC5mb3JtX19rZWVwYCk7XG4gICAgaWYgKGlzTG9hZGluZykge1xuICAgICAgYWN0aXZCdXR0b24udGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nO1xuICAgIH0gZWxzZSB7XG4gICAgICBhY3RpdkJ1dHRvbi50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QuNGC0YwnO1xuICAgIH1cbiAgfTtcblxuLy/RgdC+0LfQtNCw0LXQvCDRjdC60LfQtdC80L/Qu9GP0YAg0LLQsNC70LjQtNCw0YbQuNC4INGE0L7RgNC8XG5jb25zdCB2YWxpZGF0ZUZvcm1Qcm9maWxlID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnVmFsaWRhdGlvbiwgcHJvZmlsZUVsZW1lbnQpO1xuY29uc3QgdmFsaWRhdGVGb3JtUGhvdG8gPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWdWYWxpZGF0aW9uLCBwaG90b0VsZW1lbnQpO1xuY29uc3QgdmFsaWRhdGVGb3JtQXZhdGFyID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnVmFsaWRhdGlvbixlZGl0QXZhdGFyRWxlbWVudCk7XG5cbnZhbGlkYXRlRm9ybVByb2ZpbGUuZW5hYmxlVmFsaWRhdGlvbigpO1xudmFsaWRhdGVGb3JtUGhvdG8uZW5hYmxlVmFsaWRhdGlvbigpO1xudmFsaWRhdGVGb3JtQXZhdGFyLmVuYWJsZVZhbGlkYXRpb24oKTtcblxubGV0IHVzZXJJZDtcblxuXG4vL9C+0YLQutGA0YvRgtC40LUg0YTQvtGC0L5cbmZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayAobmFtZSwgbGluaykge1xuIHBvcHVwQmlnUGhvdG8ub3BlbihuYW1lLCBsaW5rKTtcbn07XG5cblxuLy/QtNC+0LHQsNCy0LvQtdC90LjQtSDQu9Cw0LnQutCwXG5mdW5jdGlvbiBoYW5kbGVMaWtlQ2xpY2sgKGNhcmQsIGRhdGEpIHtcbiAgY29uc3QgcHJvbWlzZSA9IGNhcmQuaXNMaWtlKClcbiAgPyBhcGkuZGVsZXRlTGlrZShjYXJkLl9pZClcbiAgOiBhcGkuYWRkTGlrZShjYXJkLl9pZCk7XG5cbiAgcHJvbWlzZVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBjYXJkLmFkZExpa2UoZGF0YSk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coYCR7ZXJyfWApO1xuICAgIH0pO1xufTtcblxuY29uc3QgcG9wdXBEZWxldGUgPSBuZXcgUG9wdXBXaXRoRGVsZXRlKCcucG9wdXBfdHlwZV9kZWxldGUtcGhvdG8nKTtcblxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQ2xpY2soY2FyZCkge1xuICBwb3B1cERlbGV0ZS5zZXRGb3JtU3VibWl0SGFuZGxlcigoKSA9PiB7XG4gICAgYXBpLmRlbGV0ZUNhcmQoY2FyZC5faWQpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNhcmQucmVtb3ZlQ2FyZCgpO1xuICAgICAgICBwb3B1cERlbGV0ZS5jbG9zZSgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke2Vycn1gKTtcbiAgfSlcbn0pO1xucG9wdXBEZWxldGUub3BlbigpO1xufVxucG9wdXBEZWxldGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuXG5cbmZ1bmN0aW9uIHJlbmRlcmVyQ2FyZCAoZGF0YSwgdXNlcklkLCBjcmVhdGVDYXJkKSB7XG4gY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgZGF0YSxcbiAgJy5waG90by10ZW1wbGF0ZScsXG4gIHVzZXJJZCxcbiAgaGFuZGxlQ2FyZENsaWNrLHtcbiAgICBoYW5kbGVEZWxldGVDbGljazogKCkgPT4gaGFuZGxlRGVsZXRlQ2xpY2soY2FyZCksXG4gICAgaGFuZGxlTGlrZUNsaWNrOiAoKSA9PiBoYW5kbGVMaWtlQ2xpY2soY2FyZCwgZGF0YSkgfSk7XG5cbiBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG5cbiBjcmVhdGVDYXJkLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xuIC8vcmV0dXJuIGNhcmRFbGVtZW50O1xufTtcblxuLy/RgdC+0LfQtNCw0LXQvCDRjdC60LfQtdC/0LvRj9GAINC60LDRgNGC0L7Rh9C60LhcbmNvbnN0IGNyZWF0ZUNhcmQgPSBuZXcgU2VjdGlvbih7XG4gIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgIHJlbmRlcmVyQ2FyZChpdGVtLCB1c2VySWQsIGNyZWF0ZUNhcmQpO1xuICB9LFxufSwgJy5waG90bycpO1xuXG4vL9C40L3RhNC+INC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtVxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lOiAnLnByb2ZpbGVfX25hbWUnLFxuICBhYm91dDogJy5wcm9maWxlX19qb2InLFxuICBhdmF0YXI6ICcucHJvZmlsZV9faW1hZ2UnXG4gfSk7XG5cbiBjb25zdCBwb3B1cEJpZ1Bob3RvID0gbmV3IFBvcHVwV2l0aEltYWdlKHtcbiAgSW1hZ2VQb3B1cDogJy5wb3B1cF90eXBlX29wZW4tcGhvdG8nLFxuICBpbWFnZU5hbWU6ICcucG9wdXBfX3Bob3RvLWNhcHRpb24nLFxuICBpbWFnZUxpbms6ICcucG9wdXBfX2JpZy1waG90bydcbiB9KTtcblxuIHBvcHVwQmlnUGhvdG8uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuXG4gY29uc3QgdXNlciA9IG5ldyBVc2VySW5mbyh7bmFtZTogJy5wcm9maWxlX19uYW1lJywgYWJvdXQ6ICcucHJvZmlsZV9fam9iJ30pO1xuXG4vL9C00L7QsdCw0LLQu9C10L3QuNC1INC60LDRgNGC0L7Rh9C10LpcbmNvbnN0IHBvcHVwQWRkQ2FyZCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgc2VsZWN0b3I6ICcucG9wdXBfdHlwZV9waG90bycsXG4gIGhhbmRsZVN1Ym1pdDogKGl0ZW0pID0+IHtcbiAgICByZW5kZXJMb2FkaW5nKCdwb3B1cF90eXBlX3Bob3RvJyx0cnVlKTtcbiAgIGFwaVxuICAgLnBvc3ROZXdDYXJkKGl0ZW0pXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICByZW5kZXJlckNhcmQoZGF0YSwgdXNlcklkLCBjcmVhdGVDYXJkKTtcbiAgICAgICAgcG9wdXBBZGRDYXJkLmNsb3NlKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHJlbmRlckxvYWRpbmcoJ3BvcHVwX3R5cGVfcGhvdG8nLCBmYWxzZSk7XG4gICAgICB9KVxuICB9XG4gIH0pO1xuICBwb3B1cEFkZENhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy/QutC90L7Qv9C60LAg0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LXQulxuICBidXR0b25BZGQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgdmFsaWRhdGVGb3JtUGhvdG8ucmVzZXRWYWxpZGF0aW9uKCk7XG4gICAgcG9wdXBBZGRDYXJkLm9wZW4oKTtcbiAgIH0pO1xuXG4vL9C00L7QsdCw0LLQu9C10L3QuNC1INCw0LLQsNGC0LDRgNCwXG5jb25zdCBwb3B1cFNldEF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgc2VsZWN0b3I6ICcucG9wdXBfdHlwZV9hdmF0YXInLFxuICBoYW5kbGVTdWJtaXQ6IChpdGVtKSA9PiB7XG4gICAgcmVuZGVyTG9hZGluZygncG9wdXBfdHlwZV9hdmF0YXInICwgdHJ1ZSk7XG4gICAgYXBpXG4gICAgLnNldEF2YXRhcihpdGVtKVxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckF2YXRhcihkYXRhKTtcbiAgICAgICAgcG9wdXBTZXRBdmF0YXIuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhgJHtlcnJ9YCk7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICByZW5kZXJMb2FkaW5nKCdwb3B1cF90eXBlX2F2YXRhcicsIGZhbHNlKTtcbiAgICAgIH0pXG59XG59KTtcbnBvcHVwU2V0QXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8v0LrQvdC+0L/QutCwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0LDQstCw0YLQsNGA0LBcbmJ1dHRvbkF2YXRhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgdmFsaWRhdGVGb3JtQXZhdGFyLnJlc2V0VmFsaWRhdGlvbigpO1xuICBwb3B1cFNldEF2YXRhci5vcGVuKCk7XG4gfSk7XG5cblxuIC8v0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjQtSDQv9GA0L7RhNC40LvRj1xuIGNvbnN0IHBvcHVwRWRpdFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gICBzZWxlY3RvcjogJy5wb3B1cF90eXBlX3Byb2ZpbGUnLFxuICAgaGFuZGxlU3VibWl0OiAoaXRlbSkgPT4ge1xuICAgIHJlbmRlckxvYWRpbmcoJ3BvcHVwX3R5cGVfcHJvZmlsZScgLCB0cnVlKTtcbiAgICBhcGlcbiAgICAuc2V0VXNlckluZm8oaXRlbSlcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgIHVzZXIuc2V0VXNlckluZm8oZGF0YSk7XG4gICAgICAgIHBvcHVwRWRpdFByb2ZpbGUuY2xvc2UoKTtcbiAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYCR7ZXJyfWApO1xuICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHJlbmRlckxvYWRpbmcoJ3BvcHVwX3R5cGVfcHJvZmlsZScgLCBmYWxzZSk7XG4gICAgICB9KVxuICAgfVxuIH0pO1xuXG5cbiBwb3B1cEVkaXRQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4vL9C60L3QvtC/0LrQsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPXG4gYnV0dG9uRWRpdC5hZGRFdmVudExpc3RlbmVyKCAnY2xpY2snLCAoKSA9PiB7XG4gIGNvbnN0IHVzZXJEYXRhID0gdXNlci5nZXRVc2VySW5mbygpO1xuICBuYW1lSW5wdXQudmFsdWUgPSB1c2VyRGF0YS5uYW1lO1xuICBqb2JJbnB1dC52YWx1ZSA9IHVzZXJEYXRhLmFib3V0O1xuICBwb3B1cEVkaXRQcm9maWxlLm9wZW4oKTtcbiAgdmFsaWRhdGVGb3JtUHJvZmlsZS5yZXNldFZhbGlkYXRpb24oKTtcbiB9KTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuIiwiXG5jbGFzcyBBcGkge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy5fdXJsID0gb3B0aW9ucy51cmw7XG4gICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRSZXNwb25zZURhdGEocmVzKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRSZXNwb25zZURhdGEocmVzKTtcbiAgfSk7XG59XG5cblxuc2V0VXNlckluZm8oaXRlbSkge1xuICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcbiAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICBuYW1lOiBpdGVtLm5hbWUsXG4gICAgICBhYm91dDogaXRlbS5hYm91dCxcbiAgICB9KSxcbiAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0UmVzcG9uc2VEYXRhKHJlcyk7XG4gIH0pO1xufVxuXG4gIHNldEF2YXRhcihhdmF0YXIpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYXZhdGFyKSxcbiAgICAgIH0pXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0UmVzcG9uc2VEYXRhKHJlcyk7XG4gICAgfSk7XG4gIH1cblxuICBwb3N0TmV3Q2FyZChkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICAgICAgbGluazogZGF0YS5saW5rLFxuICAgICAgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRSZXNwb25zZURhdGEocmVzKTtcbiAgICB9KTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoaWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2lkfWAsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0UmVzcG9uc2VEYXRhKHJlcyk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRMaWtlKGlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtpZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmdldFJlc3BvbnNlRGF0YShyZXMpO1xuICAgIH0pO1xuICB9XG5cbiAgZGVsZXRlTGlrZShpZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRSZXNwb25zZURhdGEocmVzKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldFJlc3BvbnNlRGF0YShyZXMpIHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9XG4gIH1cbn1cblxuXG5leHBvcnQgZGVmYXVsdCBBcGk7XG4iXSwibmFtZXMiOlsicGhvdG9FbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicHJvZmlsZUVsZW1lbnQiLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsImJ1dHRvbkVkaXQiLCJidXR0b25BZGQiLCJlZGl0QXZhdGFyRWxlbWVudCIsImJ1dHRvbkF2YXRhciIsImNvbmZpZ1ZhbGlkYXRpb24iLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIkNhcmQiLCJkYXRhIiwic2VsZWN0b3IiLCJ1c2VySWQiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsImhhbmRsZUxpa2VDbGljayIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfbGlrZXMiLCJsaWtlcyIsIl91c2VySWQiLCJfaWQiLCJfb3duZXJJZCIsIm93bmVyIiwiX3NlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsIl9oYW5kbGVMaWtlQ2xpY2siLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2J1dHRvbkRlbGV0ZSIsImNsYXNzTGlzdCIsImFkZCIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiaW1hZ2UiLCJfYnV0dG9uTGlrZSIsIl9saWtlQ291bnQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsImxlbmd0aCIsIl9nZXRWaWV3IiwiZmluZCIsIml0ZW0iLCJfaXNMaWtlIiwiZmlsdGVyIiwicmVtb3ZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiZXZ0IiwidGFyZ2V0IiwiY29udGFpbnMiLCJTZWN0aW9uIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaXRlbXMiLCJyZXZlcnNlIiwiZm9yRWFjaCIsImVsZW1lbnQiLCJwcmVwZW5kIiwiRm9ybVZhbGlkYXRvciIsImZvcm1FbGVtZW50IiwiX2RhdGEiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b25FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JFbGVtZW50IiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hhc0ludmFsaWRJbnB1dCIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJQb3B1cCIsIl9wb3B1cCIsIl9oYW5kbGVFc2NLZXkiLCJiaW5kIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsImNsb3NlIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZVN1Ym1pdCIsIl9mb3JtIiwiX3N1Ym1pdEJ1dHRvbiIsIl9oYW5kbGVTdWJtaXQiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiUG9wdXBXaXRoSW1hZ2UiLCJJbWFnZVBvcHVwIiwiaW1hZ2VOYW1lIiwiaW1hZ2VMaW5rIiwiX2ltYWdlTmFtZSIsIl9pbWFnZUxpbmsiLCJQb3B1cFdpdGhEZWxldGUiLCJoYW5kbGVyIiwic2V0Rm9ybVN1Ym1pdEhhbmRsZXIiLCJVc2VySW5mbyIsImFib3V0IiwiYXZhdGFyIiwiX2Fib3V0IiwiX2F2YXRhciIsImFwaSIsIkFwaSIsIm9wdGlvbnMiLCJfdXJsIiwidXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwicmVzIiwiZ2V0UmVzcG9uc2VEYXRhIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiYXV0aG9yaXphdGlvbiIsInJlbmRlckxvYWRpbmciLCJwb3B1cCIsImlzTG9hZGluZyIsImFjdGl2QnV0dG9uIiwiYWxsIiwiZ2V0VXNlckluZm8iLCJnZXRJbml0aWFsQ2FyZCIsInVzZXJEYXRhIiwidXNlckNhcmQiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwic2V0VXNlckF2YXRhciIsImNyZWF0ZUNhcmQiLCJyZW5kZXJlZCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsInZhbGlkYXRlRm9ybVByb2ZpbGUiLCJ2YWxpZGF0ZUZvcm1QaG90byIsInZhbGlkYXRlRm9ybUF2YXRhciIsInBvcHVwQmlnUGhvdG8iLCJvcGVuIiwiZW5hYmxlVmFsaWRhdGlvbiIsInBvcHVwRGVsZXRlIiwicmVuZGVyZXJDYXJkIiwiY2FyZCIsImRlbGV0ZUNhcmQiLCJyZW1vdmVDYXJkIiwiaXNMaWtlIiwiZGVsZXRlTGlrZSIsImFkZExpa2UiLCJjYXJkRWxlbWVudCIsImdlbmVyYXRlQ2FyZCIsImFkZEl0ZW0iLCJzZXRFdmVudExpc3RlbmVycyIsInVzZXIiLCJwb3B1cEFkZENhcmQiLCJwb3N0TmV3Q2FyZCIsImZpbmFsbHkiLCJyZXNldFZhbGlkYXRpb24iLCJwb3B1cFNldEF2YXRhciIsInNldEF2YXRhciIsInBvcHVwRWRpdFByb2ZpbGUiXSwic291cmNlUm9vdCI6IiJ9